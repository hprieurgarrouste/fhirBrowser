(()=>{"use strict";var __webpack_modules__={541:(e,t,r)=>{r.d(t,{Z:()=>s});var a=r(91),i=r.n(a),o=new URL(r(156),r.b);const s='<link href="'+i()(o)+'" rel="stylesheet"/> <style>#wrapper{display:flex;flex-direction:row;height:100%;overflow:hidden}#bundleCnt{display:flex;flex-direction:column;height:100%;flex:auto;width:0}main{flex:1 1 auto;height:0;border-top:1px solid var(--border-color);border-bottom:1px solid var(--border-color)}#title{margin:0;overflow:hidden;text-overflow:ellipsis}linear-progress{position:relative;top:0}#table{flex:auto}fhir-search{border-left:1px solid var(--border-color);flex:none;transition:all .3s;width:400px}fhir-search.hidden{transition:all .3s;margin-right:-400px}@media (max-width:480px){fhir-search{background-color:var(--background-color,#fff);position:relative;width:100%}fhir-search.hidden{margin-right:-100%}}</style> <div id="wrapper"> <div id="bundleCnt"> <header> <app-bar> <h3 slot="middle" id="title"></h3> <div class="toolbar" slot="right"> <round-button id="copy" title="Copy to clipboard" data-icon="content_copy"></round-button> <round-button id="download" title="Download" data-icon="download"></round-button> <round-button id="searchToggle" title="Search" data-icon="search"></round-button> <round-button id="settingsDialogToggle" title="Settings" data-icon="view_column"></round-button> <round-button id="help" title="Help" data-icon="help"></round-button> </div> </app-bar> <linear-progress></linear-progress> </header> <main> <data-table id="table"></data-table> </main> <footer> <data-table-pagination id="pagination"> <div slot="rows"><span id="paginationRange"></span> of <span id="paginationCount"></span></div> <round-button slot="arrows" id="paginationFirst" title="first" data-icon="first_page" disabled="disabled"></round-button> <round-button slot="arrows" id="paginationPrevious" title="previous" data-icon="chevron_left" disabled="disabled"></round-button> <round-button slot="arrows" id="paginationNext" title="next" data-icon="chevron_right" disabled="disabled"></round-button> <round-button slot="arrows" id="paginationLast" title="last" data-icon="last_page" disabled="disabled"/> </data-table-pagination> </footer> </div> <fhir-search id="search" class="hidden"></fhir-search> </div> <app-dialog id="settingsDialog" data-title="Settings" hidden> <fhir-bundle-columns id="columnsSelector"></fhir-bundle-columns> </app-dialog>'},91:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),t.hash&&(e+=t.hash),t.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e):e}},856:()=>{class e extends HTMLElement{constructor(){super(),this.attachShadow({mode:"closed"}).innerHTML='<style>main{align-items:center;display:flex;flex-direction:row;padding:.5em;flex-wrap:wrap;justify-content:flex-end}#barMiddle{flex-grow:1;margin:0;overflow:hidden;padding-left:.5em;font-size:1.17em;font-weight:700}#barRight{white-space:nowrap}</style> <main> <section id="barLeft"> <slot name="left"></slot> </section> <section id="barMiddle"> <slot name="middle"></slot> </section> <section id="barRight"> <slot name="right"></slot> </section> </main>'}}window.customElements.define("app-bar",e)},937:(e,t,r)=>{r(914);var a=r(91),i=r.n(a),o=new URL(r(156),r.b);const s='<link rel="stylesheet" href="'+i()(o)+'"> <style>main{position:absolute;top:0;left:0;background-color:rgba(0,0,0,32%);min-height:100%;min-width:100%}.surface{background-color:var(--background-color,#fff);border-radius:4px;height:50%;min-width:20%;max-width:50%;position:absolute;top:60px;right:1em}.overlay{background-color:rgba(255,255,255,4%);color:var(--text-color-normal,#fff);display:flex;flex-direction:column;font-family:Roboto,Arial,monospace;height:100%}#header{border-bottom:1px solid var(--border-color)}#title{margin:.5em 0}#content{overflow:auto;flex:1 1 auto;height:0}@media (max-width:480px){.surface{top:0;left:0;height:100%;width:100%;max-width:unset;max-height:unset}.overlay{background-color:transparent}}</style> <main> <div class="surface"> <div class="overlay"> <section id="header"> <app-bar> <round-button id="close" title="Close" data-icon="close" slot="left"></round-button> <h3 id="title" slot="middle"></h3> <div slot="right"> <slot name="tools"></slot> </div> </app-bar> </section> <section id="content"> <slot></slot> </section> </div> </div> </main>';class n extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML=s}connectedCallback(){this._shadow.getElementById("close").addEventListener("click",(()=>{this.hidden=!0})),this._shadow.querySelector("main").addEventListener("click",(()=>{this.hidden=!0})),this._shadow.querySelector(".surface").addEventListener("click",(e=>{e.stopPropagation()}))}static get observedAttributes(){return["data-title"]}attributeChangedCallback(e,t,r){"data-title"===e&&(this._shadow.getElementById("title").innerText=r)}}window.customElements.define("app-dialog",n)},699:(e,t,r)=>{var a=r(91),i=r.n(a),o=new URL(r(156),r.b);const s='<link href="'+i()(o)+'" rel="stylesheet"/> <style>div{height:100%;overflow:auto}table{border-collapse:collapse;min-width:100%;white-space:nowrap}thead{background-color:var(--background-color);box-shadow:0 2px 4px var(--border-color);position:sticky;top:0}td,th{height:56px;padding:1px 16px;text-align:left}th{text-transform:capitalize}tbody tr{border-bottom:1px solid var(--border-color,gray);cursor:pointer}tbody tr td::first-line{font-size:medium}tbody tr td{font-size:smaller}tbody tr.selected,tbody tr:hover{background-color:var(--hover-color,rgb(0 0 0 / 4%))}</style> <div> <table> <thead> <tr id="header"></tr> </thead> <tbody id="body"></tbody> </table> </div>';class n extends HTMLElement{constructor(){super(),this.rowClickEvent=new CustomEvent("rowclick",{bubbles:!1,cancelable:!1});const e=this.attachShadow({mode:"open"});e.innerHTML=s,this._header=e.getElementById("header"),this._body=e.getElementById("body")}addColumn(e){let t=document.createElement("th"),r=document.createTextNode(e);t.appendChild(r),this._header.appendChild(t)}addRow(e,t){let r=document.createElement("tr");r.id=e;for(const[,e]of Object.entries(t))r.insertAdjacentHTML("beforeend",`<td>${e}</td>`);r.addEventListener("click",function(e){e.stopPropagation();let t=this._body.querySelector(".selected");t&&t.classList.remove("selected");let r=e.target;for(;r&&"TR"!==r.nodeName;)r=r.parentNode;r&&(r.classList.add("selected"),this.dispatchEvent(new CustomEvent("rowclick",{bubbles:!1,cancelable:!1,detail:{resourceId:r.id}})))}.bind(this)),this._body.appendChild(r)}clear(){for(;this._header.firstChild;)this._header.removeChild(this._header.lastChild);this.removeAll()}removeAll(){for(;this._body.firstChild;)this._body.removeChild(this._body.lastChild)}}customElements.define("data-table",n)},39:(e,t,r)=>{var a=r(91),i=r.n(a),o=new URL(r(156),r.b);const s='<link rel="stylesheet" href="'+i()(o)+'"> <style>main{align-items:center;display:flex;flex-direction:row;font-family:inherit;font-size:.875rem;padding:.5em;text-align:right;white-space:nowrap}.rows{margin:0 24px;flex:auto}</style> <main> <div class="rows"> <slot name="rows"></slot> </div> <div class="arrows"> <slot name="arrows"></slot> </div> </main>';r(914);class n extends HTMLElement{constructor(){super(),this.attachShadow({mode:"closed"}).innerHTML=s}}customElements.define("data-table-pagination",n)},196:()=>{class e extends HTMLElement{constructor(){super(),this.attachShadow({mode:"closed"}).innerHTML='<style>main{background-color:var(--border-color);overflow:hidden}.thumb{height:.2em;width:50%;background-color:var(--primary-color);left:-50%;position:relative;animation:loading 2s ease-in .5s infinite}@keyframes loading{0%{transform:translateX(0)}to{transform:translateX(400%)}}</style> <main> <div class="thumb"/> </main>'}}customElements.define("linear-progress",e)},72:(e,t,r)=>{var a=r(91),i=r.n(a),o=new URL(r(156),r.b);const s='<link href="'+i()(o)+'" rel="stylesheet"/> <style>main{background-color:inherit;display:flex;align-items:center;gap:.5em}#primary{display:block;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;text-transform:capitalize;color:var(--text-color-normal,#000)}#secondary{display:block;font-size:smaller;color:var(--text-color-disabled);overflow-wrap:break-word}</style> <main> <span id="icon" class="material-symbols"></span> <span class="text"> <span id="primary"></span> <span id="secondary"></span> </span> </main>';class n extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML=s}static get observedAttributes(){return["data-primary","data-secondary","data-icon"]}attributeChangedCallback(e,t,r){switch(e){case"data-icon":this._shadow.getElementById("icon").innerText=r;break;case"data-primary":this._shadow.getElementById("primary").innerText=r;break;case"data-secondary":this._shadow.getElementById("secondary").innerHTML=r}}}customElements.define("list-item",n)},914:(e,t,r)=>{var a=r(91),i=r.n(a),o=new URL(r(156),r.b);const s='<link href="'+i()(o)+'" rel="stylesheet"/> <style>main{padding:8px;text-align:center;border:0 none;color:inherit;background-color:transparent;border-radius:50%;user-select:none}main:not([disabled]):hover{background-color:var(--hover-color,rgb(0 0 0 /5%));cursor:pointer}main[disabled]{color:var(--text-color-disabled)}</style> <main class="material-symbols"/>';class n extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML=s}static get observedAttributes(){return["data-icon","disabled"]}attributeChangedCallback(e,t,r){const a=this._shadow.querySelector("main");"data-icon"===e?a.innerText=r:"disabled"===e&&(null===r?a.removeAttribute("disabled"):a.setAttribute("disabled",""))}connectedCallback(){this._shadow.addEventListener("click",this._onClick)}disconnectedCallback(){this._shadow.removeEventListener("click",this._onClick)}_onClick(e){e.target.hasAttribute("disabled")&&e.stopPropagation()}}customElements.define("round-button",n)},165:(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{var _templates_fhirBundle_html__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(541),_components_AppBar_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(856),_components_AppDialog_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(937),_components_DataTable_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(699),_components_DataTablePagination_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(39),_components_LinearProgress_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(196),_fhirSearch_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(213),_fhirBundleColumns_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(695),_services_Fhir_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(323),_services_Snackbars_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(332),_services_Preferences_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(571);class FhirBundle extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML=_templates_fhirBundle_html__WEBPACK_IMPORTED_MODULE_0__.Z,this._resourceType=null,this._skip=0,this._pageSize=20,this._count=null,this._columns=null,this._filters=[],this._page=null,this._dateOptions={year:"numeric",month:"2-digit",day:"2-digit"},this._timeOptions={hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"short"}}connectedCallback(){this._shadow.getElementById("help").addEventListener("click",(()=>{window.open(_services_Fhir_js__WEBPACK_IMPORTED_MODULE_8__.t.helpUrl(this._resourceType.type),"FhirBrowserHelp")})),this._shadow.querySelector("data-table-pagination").addEventListener("click",(e=>{const{target:t}=e;t.matches("round-button")&&this.loadPage(t.dataset)})),this._shadow.getElementById("table").addEventListener("rowclick",(({detail:e})=>{location.hash=`#${this._resourceType.type}/${e.resourceId}`}));const e=this._shadow.getElementById("search");this._shadow.getElementById("searchToggle").addEventListener("click",(()=>{e.classList.toggle("hidden")})),e.addEventListener("apply",(({detail:t})=>{window.matchMedia("(max-width: 480px)").matches&&e.classList.add("hidden");const r=[];t.parameters.forEach((e=>{r.push(`${e.name}=${encodeURIComponent(e.value)}`)})),location.hash=`#${this._resourceType.type}?${r.join("&")}`})),this._shadow.getElementById("copy").addEventListener("click",(()=>{navigator.clipboard.writeText(JSON.stringify(this._page)).then((function(){_services_Snackbars_js__WEBPACK_IMPORTED_MODULE_9__.h.show("Copying to clipboard was successful")}),(function(e){console.error("Async: Could not copy text: ",e)}))})),this._shadow.getElementById("download").addEventListener("click",(()=>{const e=`${this._resourceType.type}-${this._skip}`,t=new File([JSON.stringify(this._page)],e,{type:"data:text/json;charset=utf-8"}),r=URL.createObjectURL(t),a=document.createElement("a");a.href=r,a.download=`${e}.json`,this._shadow.appendChild(a),a.click(),this._shadow.removeChild(a),window.URL.revokeObjectURL(r)})),this._shadow.getElementById("settingsDialogToggle").addEventListener("click",(()=>{this._shadow.getElementById("columnsSelector").load(this._resourceType.type),this._shadow.getElementById("settingsDialog").hidden=!1})),this._shadow.getElementById("settingsDialog").addEventListener("settingschanged",(({detail:e})=>{this._shadow.getElementById("settingsDialog").hidden=!0,this._columns=[],e.columns.forEach((e=>{this._columns.push(e)}));const t=this._shadow.getElementById("table");t.clear(),this._columns.forEach((e=>t.addColumn(e))),this.loadPage();const r=_services_Preferences_js__WEBPACK_IMPORTED_MODULE_10__.y.get("columns",{});r[this._resourceType.type]=this._columns,_services_Preferences_js__WEBPACK_IMPORTED_MODULE_10__.y.set("columns",r)}))}load(e,t=[]){if(this._shadow.getElementById("settingsDialog").hidden=!0,e===this._resourceType&&JSON.stringify(this._filters)===JSON.stringify(t))return;this._resourceType=e,this._filters=t;const r=this._shadow.getElementById("search");r.metadata=e,r.filters=t;const a=_services_Preferences_js__WEBPACK_IMPORTED_MODULE_10__.y.get("columns",{});this._columns=a[e.type]||["id","meta.lastUpdated"],this._shadow.getElementById("title").innerText=e.type;const i=this._shadow.getElementById("table");i.clear(),this._columns.forEach((e=>{i.addColumn(e)})),this.loadPage()}get resourceType(){return this._resourceType}loadPage(e={url:`${_services_Fhir_js__WEBPACK_IMPORTED_MODULE_8__.t.server.url}/${this._resourceType.type}?_count=${this._pageSize}`}){switch(e.relation){case"previous":this._skip-=this._pageSize;break;case"next":this._skip+=this._pageSize;break;case"last":this._skip=Math.floor(this._count/this._pageSize)*this._pageSize;break;default:this._skip=0}this._shadow.getElementById("table").removeAll();const t=this._shadow.querySelector("linear-progress");t.style.visibility="visible",_services_Fhir_js__WEBPACK_IMPORTED_MODULE_8__.t.searchByLink(e.url,this._filters).then((r=>{this._page=r,this.parsePage(r),t.style.visibility="hidden",void 0===e.relation?r.total?(this._count=r.total,this.fillPaginationRange(),this._shadow.getElementById("paginationCount").innerHTML=this._count):this.getCount():this.fillPaginationRange()})).catch((e=>{_services_Snackbars_js__WEBPACK_IMPORTED_MODULE_9__.h.show("An error occurred while searching",void 0,void 0,"error")}))}getCount(){const e=this._shadow.getElementById("paginationCount");e.innerHTML="<circular-progress></circular-progress>",_services_Fhir_js__WEBPACK_IMPORTED_MODULE_8__.t.searchCount(this._resourceType.type,this._filters).then((({total:t})=>{this._count=t,this.fillPaginationRange(),e.innerHTML=t?.toLocaleString()||"Unkown"}))}fillPaginationRange(){const e=this._shadow.getElementById("paginationRange");let t="0";void 0===this._count?t=`${this._skip+1}-${this._skip+this._pageSize}`:0!=this._count&&(t=`${this._skip+1}-${Math.min(this._skip+this._pageSize,this._count)}`),e.innerText=t}beautifyDate(e){const t=new Date(e);try{return`${t.toLocaleString(void 0,this._dateOptions)}<br>${t.toLocaleString(void 0,this._timeOptions)}`}catch(t){return e}}parsePage(data){if(data.entry){const dataTable=this._shadow.getElementById("table");data.entry.filter((e=>this._resourceType.type===e?.resource?.resourceType)).forEach((entry=>{let row={};this._columns.forEach((column=>{let value=entry.resource,path=column.split(".");path.every(((expr,idx)=>(value=eval("value[expr]"),null!=value&&(Array.isArray(value)&&(value=idx==path.length-1?value.join(", "):value[0]),!0)))),"meta.lastUpdated"===column&&(value=this.beautifyDate(value)),row[column]=value||""})),dataTable.addRow(entry.resource.id,row)}));const buttons={first:this._shadow.getElementById("paginationFirst"),previous:this._shadow.getElementById("paginationPrevious"),next:this._shadow.getElementById("paginationNext"),last:this._shadow.getElementById("paginationLast")};for(const[e,t]of Object.entries(buttons))t.setAttribute("disabled",""),t.removeAttribute("data-relation"),t.removeAttribute("data-url");let button=null;data.link.forEach((e=>{const t="prev"===e.relation?"previous":e.relation;(button=buttons[t])&&(button.removeAttribute("disabled"),button.setAttribute("data-relation",t),button.setAttribute("data-url",e.url))}))}}}customElements.define("fhir-bundle",FhirBundle)},695:(e,t,r)=>{var a=r(91),i=r.n(a),o=new URL(r(156),r.b);const s='<link rel="stylesheet" href="'+i()(o)+'"> <style>main{display:flex;flex-direction:column;height:100%}#content{overflow:auto;flex:1 1 auto;height:0}#content>*{cursor:pointer}#actions{border-top:1px solid var(--border-color);padding:.5em 1em;text-align:center;overflow:hidden}#actions input[type=button]{background:0 0;border:1px solid var(--primary-color);border-radius:4px;color:var(--primary-color);cursor:pointer;font:inherit;padding:5px 16px;text-transform:uppercase}#actions input[type=button]:hover{background-color:var(--hover-color)}</style> <main> <linear-progress></linear-progress> <section id="content"></section> <section id="actions"> <input type="button" id="apply" value="Apply"> </section> </main>';r(196),r(72);class n extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML='<style>main{padding:.5em 1em;background-color:inherit;display:flex;flex-direction:row;align-items:center}main:hover,main[selected]{background-color:var(--hover-color,rgba(0,0,0,5%))}div{flex-grow:1}input[type=checkbox]{margin-left:1em}</style> <main> <div> <slot></slot> </div> <input type="checkbox"> </main>'}static get observedAttributes(){return["selected"]}attributeChangedCallback(e,t,r){"selected"===e&&(this._shadow.querySelector("input[type=checkbox]").checked=null!==r)}}customElements.define("list-row-check",n);var l=r(323),d=r(571);class c extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML=s,this._resourceType=null}clear(){const e=this._shadow.getElementById("content");for(e.scrollTop=0;e.firstChild;)e.removeChild(e.lastChild)}connectedCallback(){this._shadow.getElementById("content").addEventListener("click",(({target:e})=>{const t=e.closest("list-row-check");null!==t?.getAttribute("selected")?t.removeAttribute("selected"):t.setAttribute("selected","")})),this._shadow.getElementById("apply").addEventListener("click",(e=>{const t=[];this._shadow.querySelectorAll("list-row-check[selected]")?.forEach((e=>t.push(e.dataset.id))),e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("settingschanged",{bubbles:!0,cancelable:!1,detail:{columns:t}}))}))}load(e){if(e===this._resourceType)return;const t=d.y.get("columns",{})[e]||["id","meta.lastUpdated"];this.clear();const r=[],a={};this._shadow.querySelector("linear-progress").hidden=!1,async function e(t,i=""){const o=await function(e){return new Promise((t=>{let r=[];a[e]?t(r):l.t.structureDefinition(e).then((i=>{a[e]=i,i.snapshot.element.filter((e=>e.isSummary)).forEach((e=>{r.push(e)})),t(r)}))}))}(t);for(const t of o)if(t.type){const a=t.type[0].code;if(a.match(/^([A-Z][a-z]+)+$/)){const r=t.path.substr(t.path.indexOf(".")+1);await e(a,r)}else{const e=(i?`${i}.`:"")+t.path.substr(t.path.indexOf(".")+1);r.push({id:e,path:e,short:t.short})}}}(e).then((()=>{const e=this._shadow.getElementById("content");this._shadow.querySelector("linear-progress").hidden=!0,r.sort(((e,t)=>e.path.localeCompare(t.path))),r.forEach((r=>{const a=document.createElement("list-item");a.setAttribute("data-primary",r.path),a.setAttribute("data-secondary",r.short);const i=document.createElement("list-row-check");i.setAttribute("data-id",r.id),t.includes(r.id)&&i.setAttribute("selected",""),i.appendChild(a),e.appendChild(i)}))}))}}customElements.define("fhir-bundle-columns",c)},213:(e,t,r)=>{var a=r(91),i=r.n(a),o=new URL(r(156),r.b);const s='<link rel="stylesheet" href="'+i()(o)+'"> <style>#wrapper{background-color:rgba(255,255,255,4%);color:var(--text-color-normal,#fff);display:flex;flex-direction:column;font-family:Roboto,Arial,monospace;height:100%}header{padding-bottom:3px}header h3{margin:0}#back{display:none}main{box-shadow:inset 0 2px 4px 0 var(--border-color);border-bottom:1px solid var(--border-color);border-top:1px solid var(--border-color);overflow:auto;flex:1 1 auto;height:0;padding:1em}footer{padding:9px 16px;text-align:center;overflow:hidden}footer input[type=button]{background:0 0;border:1px solid var(--primary-color);border-radius:4px;color:var(--primary-color);cursor:pointer;font:inherit;padding:5px 16px;text-transform:uppercase}footer input[type=button]:hover{background-color:var(--hover-color)}@media (max-width:480px){.surface{left:0;right:unset;width:100%;max-width:unset;max-height:unset}.overlay{background-color:transparent}#back{display:unset}}</style> <div id="wrapper"> <header> <app-bar id="header"> <round-button slot="left" id="back" title="back" data-icon="close"></round-button> <h3 id="title" slot="middle">Search</h3> <round-button id="clear" title="Clear" data-icon="clear_all" slot="right"></round-button> <round-button id="help" title="Help" data-icon="help" slot="right"></round-button> </app-bar> </header> <main></main> <footer> <input type="button" id="apply" value="Apply"> </footer> </div>';r(914);class n extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML='<style>main{background-color:var(--hover-color);border-bottom:1px solid gray}main:focus-within{border-color:var(--primary-color)}input{background:0 0;border:0 none;border-bottom:1px solid transparent;color:var(--text-color-normal);flex:auto;font:inherit;padding:5px;width:90px}input:focus{outline:0;border-color:var(--primary-color)}</style> <main> <input placeholder="Modifier" list="FhirSearchFieldModifierList"> <datalist id="FhirSearchFieldModifierList"> <option value="contains"></option> <option value="exact"></option> </datalist> </main>'}get value(){return this._shadow.querySelector("input").value}set value(e){this._shadow.querySelector("input").value=e}}customElements.define("fhir-search-modifier",n);class l extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML='<style>main{background-color:var(--hover-color);border-bottom:1px solid gray}main:focus-within{border-color:var(--primary-color)}input{background:0 0;border:0 none;border-bottom:1px solid transparent;color:var(--text-color-normal);flex:auto;font:inherit;padding:5px;width:90px}input:focus{outline:0;border-color:var(--primary-color)}</style> <main> <input placeholder="Prefix" list="FhirSearchPrefixList"> <datalist id="FhirSearchPrefixList"> <option value="eq">Is equal to</option> <option value="ne">is not equal to</option> <option value="gt">is greater than</option> <option value="lt">is less than</option> <option value="ge">is greater or equal to</option> <option value="le">is less or equal to</option> </datalist> </main>'}get value(){return this._shadow.querySelector("input").value}set value(e){this._shadow.querySelector("input").value=e}}customElements.define("fhir-search-prefix",l);class d extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML='<style>main{background-color:var(--hover-color);border-bottom:1px solid gray;display:flex}main:focus-within{border-color:var(--primary-color)}input{background:0 0;border:0 none;border-bottom:1px solid transparent;color:var(--text-color-normal);flex:auto;font:inherit;padding:5px}input:focus{outline:0;border-color:var(--primary-color)}</style> <main> <input type="text"> </main>'}connectedCallback(){let e=this.getAttribute("placeholder");e&&this._shadow.querySelector("input").setAttribute("placeholder",e)}get value(){return this._shadow.querySelector("input").value}set value(e){this._shadow.querySelector("input").value=e}}customElements.define("fhir-search-text",d);class c extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML='<style>main{background-color:var(--hover-color);border-bottom:1px solid gray;display:flex;flex-direction:row;flex-wrap:wrap}main:focus-within,main:focus-within input{border-color:var(--primary-color)}input{background:0 0;border:0 none;border-bottom:1px solid transparent;color:var(--text-color-normal);flex:auto;font:inherit;padding:4px 5px;max-width:120px;min-width:100px}input:focus{outline:0}</style> <main> <input type="date"> <input type="time"> </main>'}get value(){const e=this._shadow.querySelector('input[type="date"]');if(e.value){const t=this._shadow.querySelector('input[type="time"]');let r=new Date(`${e.value}T${t.value||"00:00"}`);return new Date(r.getTime()).toISOString()}return null}set value(e){this._shadow.querySelector('input[type="date"]').value="",this._shadow.querySelector('input[type="time"]').value=""}}customElements.define("fhir-search-date",c);class h extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML="<style>main{margin-bottom:1em}fieldset{display:flex;flex-direction:row;border:none;padding:0;gap:1em}fieldset:focus-within legend{font-weight:700;color:var(--primary-color)}fhir-search-date,fhir-search-text{flex:auto}span{color:var(--text-color-disabled);font-size:small;display:-webkit-box;text-overflow:ellipsis;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;padding-top:2px}</style> <main> <fieldset> <legend inert></legend> <slot></slot> </fieldset> <span inert></span> </main>"}clear(){this._shadow.querySelectorAll("fhir-search-text, fhir-search-date, fhir-search-modifier, fhir-search-prefix").forEach((e=>e.value=""))}set value(e){let t;const r=e.value.split("|"),a=e.name.split(":");switch(this._search.type){case"token":t=this._shadow.querySelector("fhir-search-text:not([data-type])"),r[1]?(this._shadow.querySelector('fhir-search-text[data-type="system"]').value=r[0],t.value=r[1]):t.value=r[0];break;case"string":case"reference":a[1]&&(this._shadow.querySelector("fhir-search-modifier").value=a[1]),t=this._shadow.querySelector("fhir-search-text"),t.value=e.value}}get value(){let e;switch(this._search.type){case"token":let t="";const r=this._shadow.querySelector('fhir-search-text[data-type="system"]');return r?.value&&(t=`${r.value}|`),e=this._shadow.querySelector("fhir-search-text:not([data-type])"),e?.value&&(t+=e.value),t?{name:this._search.name,value:t}:null;case"string":case"reference":if(e=this._shadow.querySelector("fhir-search-text"),e?.value){let t=this._search.name;const r=this._shadow.querySelector("fhir-search-modifier");return r?.value&&(t+=`:${r.value}`),{name:t,value:e.value}}break;case"date":case"datetime":if(e=this._shadow.querySelector("fhir-search-date"),e?.value){let t=e.value;const r=this._shadow.querySelector("fhir-search-prefix");return r?.value&&(t=r.value+t),{name:this._search.name,value:t}}}return null}get name(){return this._search.name}init(e){function t(e,t){let a=document.createElement("fhir-search-text");a.setAttribute("name",e.name),t&&a.setAttribute("placeholder",t),r.appendChild(a)}if("_format"===e.name)return!1;this._search=e,this._shadow.querySelector("legend").innerText=e.name,this._shadow.querySelector("span").innerText=e.documentation||"";const r=this._shadow.querySelector("fieldset");let a;if("_id"==e.name)t(e);else if("_filter"==e.name)t(e);else switch(e.type){case"token":!function(e){let t=document.createElement("fhir-search-text");t.setAttribute("placeholder","System"),t.setAttribute("data-type","system"),t.setAttribute("name",e.name),r.appendChild(t)}(e),t(e,"code");break;case"string":case"reference":!function(e){let t=document.createElement("fhir-search-modifier");t.setAttribute("data-name",e.name),r.appendChild(t)}(e),t(e);break;case"date":case"datetime":a=document.createElement("fhir-search-prefix"),a.setAttribute("data-name",e.name),r.appendChild(a),a=document.createElement("fhir-search-date"),a.setAttribute("name",e.name),r.appendChild(a);break;default:return!1}return!0}}customElements.define("fhir-search-item",h);var u=r(323);class p extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML=s}connectedCallback(){const e=this._shadow.querySelector("main");function t(){window.matchMedia("(max-width: 480px)").matches&&this.classList.add("hidden");const t=[];e.querySelectorAll("fhir-search-item").forEach((({value:e})=>{e&&t.push(`${e.name}=${encodeURIComponent(e.value)}`)})),location.hash=`#${this._resourceType.type}`+(t.length?`?${t.join("&")}`:"")}this._shadow.getElementById("back").addEventListener("click",(e=>{this.classList.add("hidden"),e.preventDefault(),e.stopPropagation()})),this._shadow.getElementById("clear").addEventListener("click",(e=>{this.clear(),e.preventDefault(),e.stopPropagation()})),this._shadow.getElementById("help").addEventListener("click",(e=>{window.open(u.t.helpUrl("search"),"FhirBrowserHelp"),e.preventDefault(),e.stopPropagation()})),this._shadow.getElementById("apply").addEventListener("click",(e=>{t.call(this),e.preventDefault(),e.stopPropagation()})),e.addEventListener("keydown",(e=>{"Enter"!==e.code&&"NumpadEnter"!==e.code||(t.call(this),e.preventDefault(),e.stopPropagation())}))}clear(){this._shadow.querySelector("main").querySelectorAll("fhir-search-item").forEach((e=>e.clear()))}set filters(e){const t=this._shadow.querySelector("main").querySelectorAll("fhir-search-item");this.clear(),e.forEach((e=>{const r=e.name.split(":")[0];t.forEach((t=>{t.name==r&&(t.value=e)}))}))}set metadata(e){if(e.type==this._resourceType)return;this._resourceType=e;const t=this._shadow.querySelector("main");for(t.scrollTop=0;t.firstChild;)t.removeChild(t.lastChild);e?.searchParam.sort(((e,t)=>e.name.localeCompare(t.name))).forEach((e=>{const r=document.createElement("fhir-search-item");r.init(e)&&t.appendChild(r)}))}}customElements.define("fhir-search",p)},323:(e,t,r)=>{r.d(t,{t:()=>a});class a{static{this._server=null}static get release(){return{"5.0.0":"R5","4.6.0":"R5","4.5.0":"R5","4.4.0":"R5","4.3.0":"R4B","4.2.0":"R5","4.1.0":"R4B","4.0.1":"R4","3.5.0":"R4","3.3.0":"R4","3.2.0":"R4","3.0.2":"STU3","3.0.1":"STU3","3.0.0":"STU3"}[this._server.capabilities.fhirVersion]||null}static set server(e){this._server=e}static get server(){return this._server}static helpUrl(e){return`https://hl7.org/fhir/${this.release}/${e.toLowerCase()}.html`}static references(e){const t=[];return this._server.capabilities.rest[0].resource.filter((t=>t?.searchParam?.find((t=>"reference"===t.type&&t.name===e.type.toLowerCase())))).forEach((e=>t.push(e.type))),t}static formatEnable(e){let t=[];switch(e){case"json":t.push("json"),t.push("application/fhir+json"),t.push("html/json");break;case"xml":t.push("xml"),t.push("application/fhir+xml"),t.push("html/xml");break;case"ttl":t.push("ttl"),t.push("application/x-turtle"),t.push("html/turtle")}return this.server.capabilities.format.some((e=>t.includes(e)))}static async capabilities(e){const t=new URL(`${e.url}/metadata`);t.searchParams.set("_format","json");try{const r=await fetch(t,{cache:"reload",headers:e.headers});return r.ok?r.json():Promise.reject(r)}catch(e){return Promise.reject(e)}}static async structureDefinition(e){const t=new URL(`https://hl7.org/fhir/${this.release}/${e.toLowerCase()}.profile.json`);return(await fetch(t,{cache:"force-cache"})).json()}static async read(e,t){const r=new URL(`${this._server.url}/${e}/${t}`);return r.searchParams.set("_format","json"),(await fetch(r,{headers:this._server.headers})).json()}static async readXml(e,t){const r=new URL(`${this._server.url}/${e}/${t}`);return r.searchParams.set("_format","xml"),r.searchParams.set("_pretty","true"),(await fetch(r,{headers:this._server.headers})).text()}static async readTtl(e,t){const r=new URL(`${this._server.url}/${e}/${t}`);return r.searchParams.set("_format","ttl"),(await fetch(r,{headers:this._server.headers})).text()}static async searchByLink(e,t=[]){const r=new URL(e);r.searchParams.set("_summary","true"),r.searchParams.set("_format","json"),t.forEach((e=>{r.searchParams.set(e.name,e.value)}));try{const e=await fetch(r,{headers:this._server.headers});return e.ok?e.json():Promise.reject(e)}catch(e){return Promise.reject(e)}}static async searchCount(e,t=[]){const r=new URL(`${this._server.url}/${e}`);r.searchParams.set("_summary","count"),r.searchParams.set("_format","json"),t.forEach((e=>{r.searchParams.set(e.name,e.value)}));const a=await fetch(r,{headers:this._server.headers});if(!a.ok)throw a;return a.json()}static async connect(e,t){if(t.auth)switch(t.auth.method){case"oauth2":this.oauth2_getToken(t.auth.setup).then((e=>{t.headers||(t.headers={}),t.headers.Authorization=`${e.token_type} ${e.access_token}`}));break;case"basic":let e=btoa(`${t.auth.setup.username}:${t.auth.setup.password}`);t.headers||(t.headers={}),t.headers.Authorization=`Basic ${e}`;break;case"apikey":t.headers||(t.headers={}),t.headers[t.auth.setup.key]=t.auth.setup.value}await a.capabilities(t).then((r=>{t.serverCode=e,t.capabilities=r,a.server=t}))}static async oauth2_getToken(e){let t={client_id:e.client_id,client_secret:e.client_secret,grant_type:e.grant_type,username:e.username,password:e.password},r=new URLSearchParams(t);return(await fetch(e.access_token_url,{headers:{"Content-type":"application/x-www-form-urlencoded"},method:"POST",body:r.toString()})).json()}static ResourceIcon(e){return{account:"account_balance_wallet",accountreport:"account_balance_wallet",activitydefinition:"quiz",adverseevent:"emergency_home",allergyintolerance:"allergy",appointment:"today",appointmentresponse:"event_available",auditevent:"browse_activity",basic:"shapes",binary:"data_object",biologicallyderivedproduct:"fork_right",bodystructure:"skeleton",bundle:"format_paragraph",capabilitystatement:"campaign",careplan:"flowsheet",careteam:"groups",catalogentry:"description",chargeitem:"sell",chargeitemdefinition:"sell",claim:"request_quote",claimresponse:"task",clinicalimpression:"comment",codesystem:"data_array",communication:"mail",communicationrequest:"outgoing_mail",compartmentdefinition:"category",composition:"blender",conceptmap:"integration_instructions",condition:"coronavirus",consent:"done",contract:"contract",coverage:"shield",coverageeligibilityrequest:"policy",coverageeligibilityresponse:"verified_user",detectedissue:"bug_report",device:"electrical_services",devicedefinition:"inventory_2",devicemetric:"health_metrics",devicerequest:"unknown_document",deviceusestatement:"home_iot_device",diagnosticreport:"diagnosis",documentmanifest:"dataset",documentreference:"bookmarks",effectevidencesynthesis:"clinical_notes",encounter:"medical_services",enrollmentrequest:"contact_support",enrollmentresponse:"support_agent",endpoint:"location_on",episodeofcare:"blood_pressure",evidence:"search_check",evidencevariable:"troubleshoot",eventdefinition:"event_note",examplescenario:"video_library",explanationofbenefit:"speaker_notes",familymemberhistory:"family_restroom",familimemberhistory:"history",flag:"flag",goal:"sports_score",graphdefinition:"bar_chart",group:"group",guidanceresponse:"mark_email_read",healthcareservice:"mixture_med",implementationguide:"developer_guide",imagingstudy:"radiology",immunization:"immunology",immunizationevaluation:"microbiology",immunizationrecommendation:"mixture_med",insuranceplan:"payments",invoice:"receipt_long",library:"local_library",linkage:"link",list:"list",location:"pin_drop",manifest:"dataset",measure:"scale",measurereport:"lab_profile",media:"perm_media",medicinalproduct:"pill",medicinalproductauthorization:"pill",medicinalproductcontraindication:"pill_off",medicinalproductindication:"pill",medicinalproductingredient:"pill",medicinalproductinteraction:"pill",medicinalproductmanufactured:"pill",medicinalproductpackaged:"pill",medicinalproductpharmaceutical:"pill",medicinalproductundesirableeffect:"sick",medication:"medication",medicationadministration:"medication_liquid",medicationdispense:"prescriptions",medicationknowledge:"medication",medicationrequest:"medication",medicationstatement:"medication",messagedefinition:"developer_guide",messageheader:"code",molecularsequence:"genetics",namingsystem:"import_contacts",nutritionorder:"restaurant",observation:"description",observationdefinition:"file_present",operationdefinition:"function",operationoutcome:"function",organization:"local_hospital",organizationaffiliation:"account_tree",parameters:"settings",patient:"personal_injury",paymentnotice:"credit_card",paymentreconciliation:"credit_score",person:"person",plandefinition:"view_list",practitioner:"stethoscope",practitionerrole:"medical_information",procedure:"checklist",provenance:"deployed_code_history",questionnaire:"assignment",questionnaireresponse:"assignment_turned_in",relatedperson:"family_restroom",requestgroup:"group_work",researchdefinition:"lab_panel",researchelementdefinition:"labs",researchstudy:"biotech",researchsubject:"biotech",resource:"description",riskevidencesynthesis:"feedback",riskassessment:"problem",schedule:"calendar_month",searchparameter:"screen_search_desktop",servicerequest:"ecg",slot:"view_agenda",specimen:"colorize",specimendefinition:"colorize",structuredefinition:"developer_guide",structuremap:"table",subscription:"loyalty",substance:"science",substancenucleicacid:"science",substancepolymer:"science",substanceprotein:"science",substancereferenceinformation:"science",substancesourcematerial:"science",substancespecification:"science",supplydelivery:"deployed_code",supplyrequest:"deployed_code_history",task:"task",terminologycapabilities:"developer_guide",testreport:"integration_instructions",testscript:"code_blocks",valueset:"data_array",verificationresult:"new_releases",visionprescription:"ophthalmology"}[e.toLowerCase()]||"unknown_med"}}},571:(e,t,r)=>{r.d(t,{y:()=>a});class a{static{this.KEY="preferences"}static get(e,t=null){const r=localStorage.getItem(this.KEY);let a=null;return null===r?t:(a=JSON.parse(r),a[e]||t)}static set(e,t){const r=localStorage.getItem(this.KEY);let a=null;a=null!==r?JSON.parse(r):{},a[e]=t,localStorage.setItem(this.KEY,JSON.stringify(a))}}},332:(e,t,r)=>{r.d(t,{h:()=>i});class a extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML='<style>main{background-color:#fff;border-radius:4px;box-shadow:0 11px 15px -7px rgb(0 0 0 / 20%),0 24px 38px 3px rgb(0 0 0 / 14%),0 9px 46px 8px rgb(0 0 0 / 12%);bottom:1em;margin:0 1em;min-width:344px;position:absolute}.overlay{align-items:center;background-color:rgba(0,0,0,85%);color:#fff;display:flex;flex-direction:row;font-family:Roboto,Arial,monospace;min-height:48px;padding:0 1em}main.error .overlay{background-color:var(--background-error)}#message{flex-grow:1;overflow:hidden;padding:0 1em;text-overflow:ellipsis;white-space:nowrap}slot[name=right]{margin-left:1em}@media (max-width:480px){main{min-width:unset;width:calc(100% - 2em)}}</style> <main> <div class="overlay"> <div id="message"> <slot></slot> </div> <slot name="right"></slot> </div> </main>'}set type(e="info"){this._shadow.querySelector("main").classList.add(e)}}customElements.define("snack-bars",a);class i{static{this._container=document.body}static set container(e){this._container=e}static show(e,t,r=4e3,a="info"){let i=document.createElement("snack-bars");i.type=a,i.appendChild(document.createTextNode(e)),t&&(t.setAttribute("slot","right"),i.appendChild(t)),this._container.appendChild(i),setTimeout((()=>{i.remove()}),r)}}},156:(e,t,r)=>{e.exports=r.p+"d353739f137f323d232b.css"}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;__webpack_require__.g.importScripts&&(e=__webpack_require__.g.location+"");var t=__webpack_require__.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var a=r.length-1;a>-1&&!e;)e=r[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=e})(),__webpack_require__.b=document.baseURI||self.location.href;var __webpack_exports__={};(()=>{var e=__webpack_require__(91),t=__webpack_require__.n(e),r=new URL(__webpack_require__(156),__webpack_require__.b);const a='<link rel="stylesheet" href="'+t()(r)+'"> <style>:host{background-color:var(--background-color,#fff);color:var(--text-color-normal,rgb(0,0,0,87%));display:flex;flex-direction:column;font-family:Roboto,Arial,monospace;font-size:1rem;font-weight:400;height:100vh;line-height:1.5}header{background-color:var(--primary-color,#000);color:#fff}h3{margin:0}main{flex:1 1 auto;height:0;overflow:hidden}main>div{display:flex;flex-direction:row;height:100%}#leftPanel{border-right:1px solid var(--border-color,gray);flex:none;transition:all .3s;margin-left:0;width:300px}#leftPanel.hidden{transition:all .3s;margin-left:-300px}#bdy{flex:1 1 auto;overflow:hidden;width:0;position:relative;block-size:100%;display:grid;grid-auto-flow:column;grid-auto-columns:100%;grid-auto-rows:100%}#waiting{align-items:center;background-color:rgba(0,0,0,32%);display:flex;font-size:5em;justify-content:center;left:0;min-height:100%;min-width:100%;position:absolute;top:0;visibility:hidden}@media (max-width:480px){#leftPanel{background-color:var(--background-color,#fff);position:static;width:100%}#leftPanel.hidden{margin-left:-100%}}</style> <header> <app-bar id="header" caption=""> <round-button slot="left" id="navigation" title="Menu" data-icon="menu" hidden></round-button> <span id="appTitle" slot="middle">FHIR Browser</span> <color-scheme slot="right"></color-scheme> <round-button slot="right" id="serverDialogToggle" title="Connections" data-icon="public"></round-button> <round-button slot="right" id="aboutDialogToggle" title="About" data-icon="help"></round-button> </app-bar> </header> <main> <div> <app-left-panel id="leftPanel" class="hidden"> <fhir-metadata id="metadata"></fhir-metadata> </app-left-panel> <div id="bdy" style="visibility:hidden"> <fhir-bundle id="bundle"></fhir-bundle> <fhir-resource id="resource"></fhir-resource> </div> </div> </main> <app-dialog id="serverDialog" data-title="Connections" hidden> <fhir-server-list id="serverSelector"></fhir-server-list> </app-dialog> <app-dialog id="aboutDialog" data-title="About FHIR Browser" hidden> <fhir-browser-about></fhir-browser-about> </app-dialog> <app-dialog id="serverNewDialog" data-title="New Connection" hidden> <fhir-server-form></fhir-server-form> </app-dialog> <div id="waiting"> <circular-progress></circular-progress> </div>';__webpack_require__(856),__webpack_require__(937);var i=__webpack_require__(571);class o extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML='<round-button title="" data-icon=""></round-button>'}connectedCallback(){this._shadow.addEventListener("click",this._onClick.bind(this)),this._setColorScheme(i.y.get("colorScheme","auto"))}disconnectedCallback(){this._shadow.removeEventListener("click",this._onClick)}_onClick(e){const t=["light","dark","auto"];let r=i.y.get("colorScheme","auto"),a=t.findIndex((e=>e===r))+1;r=t[a%3],i.y.set("colorScheme",r),this._setColorScheme(r)}_setColorScheme(e){let t="",r=e;switch(e){case"dark":t="brightness_4";break;case"light":t="light_mode";break;default:"auto"===e&&(r=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),t="brightness_auto"}const a=this._shadow.querySelector("round-button");a.setAttribute("data-icon",t),a.title=`Theme ${e}`,document.body.setAttribute("color-scheme",r)}get value(){return i.y.get("colorScheme","auto")}}customElements.define("color-scheme",o);class s extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML="<style>main{height:.7em;width:.7em;color:var(--primary-color);display:inline-block;border:.15em solid;border-radius:50%;border-top-color:transparent;animation:rotate 1s linear infinite}@keyframes rotate{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}</style> <main/>"}setColor(e){this._shadow.querySelector("main").setAttribute("style","color:"+e+";")}}customElements.define("circular-progress",s);var n=new URL(__webpack_require__(156),__webpack_require__.b);const l='<link rel="stylesheet" href="'+t()(n)+'"> <style>main{display:flex;flex-direction:column;height:100%}::slotted(*){flex:1 1 auto;height:0}</style> <main> <slot></slot> </main>';class d extends HTMLElement{constructor(){super(),this.attachShadow({mode:"closed"}).innerHTML=l}}customElements.define("app-left-panel",d);var c=new URL(__webpack_require__(156),__webpack_require__.b);const h='<link href="'+t()(c)+'" rel="stylesheet"/> <style>main{padding:1em}a{color:var(--primary-color)}</style> <main> <p> FHIR Browser is and <a target="_blank" href="https://github.com/hprieurgarrouste/fhirBrowser.git">open source</a> utility developed by and intended for FHIR developers<br/>and all IT professionals who work with a FHIR server. <br/>Its purpose is to help users analyze FHIR servers and learn about their content. </p> <a target="_blank" href="https://github.com/hprieurgarrouste/fhirBrowser/blob/master/licence.md"> <img src="https://img.shields.io/static/v1?label=license&message=CC-BY-NC-ND-4.0&color=green" alt=""/> </a> </main>';class u extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML=h}}customElements.define("fhir-browser-about",u),__webpack_require__(165);class p extends HTMLElement{constructor(){super(),this.attachShadow({mode:"closed"}).innerHTML="<style>main{background-color:transparent;color:inherit;cursor:pointer;font:inherit;height:3em;line-height:3em;text-transform:uppercase;text-align:center;white-space:nowrap;width:100%}</style> <main> <slot></slot> </main>"}}customElements.define("app-tab",p);class m extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML="<style>main{display:flex;flex-direction:row;flex-wrap:nowrap}::slotted(app-tab){flex-grow:1;border-bottom:2px solid transparent;font-size:smaller}::slotted(app-tab:hover){background-color:var(--hover-color,rgba(0,0,0,5%))}::slotted(app-tab[selected]){border-bottom-color:var(--primary-color,#000);font-weight:700;color:var(--primary-color,#000)}</style> <main> <slot></slot> </main>"}connectedCallback(){this._shadow.querySelector("main").onclick=e=>{"APP-TAB"===e.target.nodeName&&(this.select(e.target.id),e.stopPropagation())}}select(e){const t=this._shadow.querySelector("slot").assignedElements().filter((t=>t.id===e))[0];t&&(this._shadow.querySelector("slot").assignedElements().forEach((e=>e.removeAttribute("selected"))),t.setAttribute("selected","selected"),this.dispatchEvent(new CustomEvent("click",{bubbles:!1,cancelable:!1,detail:{tab:t}})))}}customElements.define("tab-bar",m);var _=new URL(__webpack_require__(156),__webpack_require__.b);const b='<link href="'+t()(_)+'" rel="stylesheet"/> <style>main{display:flex;flex-direction:column;height:100%}#list{box-shadow:inset 0 2px 4px 0 var(--border-color);flex:1 1 auto;height:0;overflow:auto}#list>*{cursor:pointer}</style> <main> <fhir-resource-types-filter id="filter"></fhir-resource-types-filter> <div id="list"></div> </main>';class f extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML="<style>main{padding:.5em 1em;background-color:inherit}main:hover,main[selected]{background-color:var(--hover-color,rgba(0,0,0,5%))}</style> <main> <slot></slot> </main>"}static get observedAttributes(){return["selected"]}attributeChangedCallback(e,t,r){if("selected"===e){const e=this._shadow.querySelector("main");null===r?e.removeAttribute("selected"):e.setAttribute("selected","")}}}customElements.define("list-row",f),__webpack_require__(72);var y=new URL(__webpack_require__(156),__webpack_require__.b);const w='<link href="'+t()(y)+'" rel="stylesheet"/> <style>main{display:flex;padding:.7em;font-size:smaller}main:focus-within{border-bottom-color:var(--primary-color,#000)}#text{background:0 0;border:0 none;color:var(--text-color-normal);flex:1 1 auto;font-family:inherit;font-size:inherit}#text:focus{outline:0}#clear{cursor:pointer;font-size:inherit;line-height:unset}</style> <main> <input id="text" type="text" placeholder="Type to filter"/> <i id="clear" class="material-symbols" title="clear">close</i> </main>';class g extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML=w}connectedCallback(){const e=this._shadow.getElementById("text");function t(t){this.dispatchEvent(new CustomEvent("filterChanged",{bubbles:!1,cancelable:!1,detail:{text:e.value}}))}this._shadow.getElementById("clear").addEventListener("click",(()=>{e.value&&(e.value="",t.call(this))})),this._shadow.querySelector("main").addEventListener("mousedown",(t=>{t.preventDefault(),t.stopPropagation(),e.focus()})),e.addEventListener("input",t.bind(this))}clear(){this._shadow.getElementById("clear").click()}}customElements.define("fhir-resource-types-filter",g);var v=__webpack_require__(323);class x extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML=b,this._metadata=null,this._resourceType=null}connectedCallback(){this._shadow.getElementById("filter").addEventListener("filterChanged",(({detail:e})=>{const t=e.text.toLowerCase();this._shadow.getElementById("list").childNodes.forEach((e=>{e.hidden=!e.dataset.type.toLowerCase().startsWith(t)}))}));const e=this._shadow.getElementById("list");e.addEventListener("click",(({target:t})=>{const r=t.closest("list-row");r&&(e.querySelector("[selected]")?.removeAttribute("selected"),r.setAttribute("selected",""),this._resourceType=r.dataset.type,location.hash=`#${r.dataset.type}`)}))}clear(){this._shadow.getElementById("filter").clear();const e=this._shadow.getElementById("list");for(e.scrollTop=0;e.firstChild;)e.removeChild(e.lastChild)}get value(){return this._resourceType}set value(e){if(e!=this._resourceType){const t=this._shadow.getElementById("list"),r=Array.from(t.childNodes).filter((t=>t.dataset.type===e));r?.length&&(this._resourceType=e,this._shadow.querySelector("[selected]")?.removeAttribute("selected"),r[0].setAttribute("selected",""),r[0].scrollIntoView())}}set metadata(e){this._metadata=e,this.clear();const t=this._shadow.getElementById("list");e.rest[0].resource.filter((e=>e.interaction.map((e=>e.code)).includes("search-type"))).forEach((e=>{const r=document.createElement("list-row");r.setAttribute("data-type",e.type);const a=document.createElement("list-item");a.setAttribute("data-primary",e.type),a.setAttribute("data-icon",v.t.ResourceIcon(e.type)),r.appendChild(a),t.appendChild(r)}))}}customElements.define("fhir-resource-types",x);class E extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML="<style>main{height:100%;overflow-y:auto}main>*{cursor:default}</style> <main/>"}clear(){const e=this._shadow.querySelector("main");for(;e.firstChild;)e.removeChild(e.lastChild)}set metadata(e){this.clear();const t=this._shadow.querySelector("main");a("copyright",e.copyright),a("description",e.description),a("fhirVersion",`${e.fhirVersion} (${v.t.release})`);const r=document.createElement("UL");function a(e,r){if(void 0===r)return;const a=document.createElement("list-row"),i=document.createElement("list-item");i.setAttribute("data-primary",e),i.setAttribute("data-secondary",r),a.appendChild(i),t.appendChild(a)}e.format.forEach((e=>{const t=document.createElement("LI");t.innerText=e,r.appendChild(t)})),a("format",r.outerHTML),e.implementation&&(a("implementation description",e.implementation.description),a("implementation name",e.implementation.name),a("implementation url",e.implementation.url)),a("language",e.language),a("name",e.name),a("publisher",e.publisher),e.software&&(a("software name",e.software.name),a("software version",e.software.version),a("software release date",e.software.releaseDate))}}customElements.define("fhir-capability",E);class k extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML='<style>main{display:flex;flex-direction:column;height:100%;overflow:hidden;position:relative}tab-bar{border-bottom:1px solid var(--border-color,gray)}#tabsBody{flex:auto;height:0;overflow:hidden;position:relative;block-size:100%;display:grid;grid-auto-flow:column;grid-auto-columns:100%;grid-auto-rows:100%}#server{padding:1em}</style> <main> <section id="server"> <list-item id="serverTitle" data-primary="" data-secondary="" data-icon=""></list-item> </section> <tab-bar> <app-tab id="tabResources" data-target="resourceTypes" selected="selected">Resource Types</app-tab> <app-tab id="tabDetails" data-target="capability">Details</app-tab> </tab-bar> <div id="tabsBody"> <fhir-resource-types id="resourceTypes"></fhir-resource-types> <fhir-capability id="capability"></fhir-capability> </div> </main>',this._metadata=null}connectedCallback(){this._shadow.querySelector("tab-bar").addEventListener("click",(({detail:e})=>{this._shadow.getElementById(e.tab.dataset.target).scrollIntoView({behavior:window.matchMedia("(prefers-reduced-motion: reduce)").matches?"auto":"smooth",block:"start",inline:"start"})}))}clear(){this._shadow.getElementById("serverTitle").setAttribute("data-primary",""),this._shadow.getElementById("serverTitle").setAttribute("data-secondary",""),this._shadow.getElementById("resourceTypes").clear(),this._shadow.getElementById("capability").clear()}select(e){this._shadow.getElementById("resourceTypes").value=e}set server(e){this.clear(),this._shadow.getElementById("serverTitle").setAttribute("data-primary",e.serverCode),this._shadow.getElementById("serverTitle").setAttribute("data-secondary",e.url),this._shadow.getElementById("resourceTypes").metadata=e.capabilities,this._shadow.getElementById("capability").metadata=e.capabilities}}customElements.define("fhir-metadata",k);var L=new URL(__webpack_require__(156),__webpack_require__.b);const T='<link rel="stylesheet" href="'+t()(L)+'"> <style>#wrapper{display:flex;flex-direction:column;height:100%}#title{margin:0;overflow:hidden;text-overflow:ellipsis}#jsonView,#ttlView,#xmlView{flex:1 1 auto;height:0}#header.error{background-color:var(--background-error,transparent);color:#fff}#error{padding:1em}#refPanel{border-top:1px solid var(--border-color,gray)}</style> <div id="wrapper"> <app-bar id="header"> <h3 slot="middle" id="title"></h3> <round-button slot="right" id="share" title="Share" data-icon="share"></round-button> <round-button slot="right" id="copy" title="Copy to clipboard" data-icon="content_copy"></round-button> <round-button slot="right" id="download" title="Download" data-icon="download"></round-button> <round-button slot="right" id="help" title="Help" data-icon="help"></round-button> </app-bar> <tab-bar> <app-tab id="tabJson" selected="selected">Json</app-tab> <app-tab id="tabXml" hidden>Xml</app-tab> <app-tab id="tabTtl" hidden>Ttl</app-tab> </tab-bar> <fhir-resource-json id="jsonView"></fhir-resource-json> <fhir-resource-xml id="xmlView" hidden></fhir-resource-xml> <fhir-resource-ttl id="ttlView" hidden></fhir-resource-ttl> <span id="error"></span> <div id="refPanel"> <fhir-references></fhir-references> </div> </div>';__webpack_require__(914);var C=new URL(__webpack_require__(156),__webpack_require__.b);const I='<link rel="stylesheet" href="'+t()(C)+"\"> <style>main{--indent:32px;display:flex;flex-direction:column;height:100%}#content{box-shadow:inset 0 2px 4px 0 var(--border-color);color:var(--text-color-normal,#000);flex:1 1 auto;font-family:monospace;height:0;overflow:auto;padding:1em;white-space:nowrap}dl{margin:0;padding-left:var(--indent)}dt{list-style-type:none}span{color:var(--json-viewer-values-color,#000);cursor:inherit}span.key{color:var(--json-viewer-properties-color,#000)}span.key::before{content:'\"'}span.key::after{content:'\": '}dt.array>span.value>dl>dt>span.key::before{content:''}dt.array>span.value>dl>dt>span.key::after{content:': '}span.value.string::before{content:'\"'}span.value.string::after{content:'\"'}dt.array>span.value::before{content:'['}dt.array>span.value::after{content:']'}dt.object>span.value::before{content:'{'}dt.object>span.value::after{content:'}'}dt,dt.array>span.value::after,dt.object>span.value::after{padding-left:var(--indent)}dt.array,dt.object{padding-left:0}dt.array::before,dt.object::before{cursor:pointer;content:'expand_less ';font-family:'Material Symbols Sharp';font-weight:700;line-height:inherit;vertical-align:middle;color:var(--text-color-disabled,#000)}dt:not(:last-child)::after{content:\",\"}dt.collapsed::before{content:'expand_more '}dt.collapsed>span dl{display:none}dt.array.collapsed span.value::after{content:'...]';padding-left:0}dt.object.collapsed span.value::after{content:'...}';padding-left:0}@media (max-width:480px){#content{line-height:2em}}</style> <main> <div id=\"content\"></div> </main>";class B extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML=I}connectedCallback(){this._shadow.getElementById("content").addEventListener("click",(({target:e,offsetX:t,offsetY:r})=>{if(e.classList.contains("array")||e.classList.contains("object")){const a=e.childNodes[0];a&&t<a.offsetLeft&&r<a.offsetHeight&&e.classList.toggle("collapsed")}}))}clear(){const e=this._shadow.getElementById("content");e.scrollTo(0,0),e.innerHTML="Loading...",e.style.cursor="wait"}set source(e){const t=this._shadow.getElementById("content");function r(e){let t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol}t.scrollTo(0,0),t.innerHTML="",t.appendChild(document.createTextNode("{")),t.appendChild(function e(t){let a=document.createElement("dl");for(const[i,o]of Object.entries(t)){const t=document.createElement("dt"),s=document.createElement("span");s.className="key",s.innerText=i,t.appendChild(s);const n=document.createElement("span");if(n.classList.add("value"),null===o)n.innerText="null";else if("string"==typeof o)if(n.classList.add("string"),"reference"===i){let e=o;e.startsWith(v.t.server.url)&&(e=e.slice(v.t.server.url.length+1));let t=document.createElement("a");t.setAttribute("href",`#${e}`),t.appendChild(document.createTextNode(o)),n.appendChild(t)}else if(r(o)){let e=document.createElement("a");e.setAttribute("href",o),e.setAttribute("target","_blank"),e.appendChild(document.createTextNode(o)),n.appendChild(e)}else n.innerText=o;else"object"==typeof o?(t.classList.add(Array.isArray(o)?"array":"object"),n.appendChild(e(o))):n.innerText=o;t.appendChild(n),a.appendChild(t)}return a}(e)),t.appendChild(document.createTextNode("}")),t.style.cursor="default"}}customElements.define("fhir-resource-json",B);var S=new URL(__webpack_require__(156),__webpack_require__.b);const q='<link rel="stylesheet" href="'+t()(S)+'"> <style>main{display:flex;flex-direction:column;height:100%}#content{box-shadow:inset 0 2px 4px 0 var(--border-color);color:var(--text-color-normal,#000);flex:1 1 auto;font-family:monospace;height:0;overflow:auto;padding:1em;white-space:pre;margin:0}@media (max-width:480px){#content{line-height:2em}}</style> <main> <pre id="content"></pre> </main>';class M extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML=q}clear(){const e=this._shadow.getElementById("content");e.scrollTo(0,0),e.innerHTML="Loading...",e.style.cursor="wait"}set source(e){const t=this._shadow.getElementById("content"),r=new XMLSerializer;t.scrollTo(0,0),t.innerText=r.serializeToString(e),t.style.cursor="default"}}customElements.define("fhir-resource-xml",M);class A extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML='<style>main{display:flex;flex-direction:column;height:100%}#content{box-shadow:inset 0 2px 4px 0 var(--border-color);color:var(--text-color-normal,#000);flex:1 1 auto;font-family:monospace;height:0;overflow:auto;padding:1em;white-space:pre;margin:0}@media (max-width:480px){#content{line-height:2em}}</style> <main> <pre id="content"></pre> </main>'}clear(){const e=this._shadow.getElementById("content");e.scrollTo(0,0),e.innerHTML="Loading...",e.style.cursor="wait"}set source(e){const t=this._shadow.getElementById("content");t.scrollTo(0,0),t.innerText=e,t.style.cursor="default"}}customElements.define("fhir-resource-ttl",A);var P=new URL(__webpack_require__(156),__webpack_require__.b);const R='<link href="'+t()(P)+'" rel="stylesheet"/> <style>main{display:flex;align-items:center;gap:.5em;padding:.2em .5em;border-radius:1em;white-space:nowrap;border:1px solid var(--border-color);color:var(--text-color-normal);cursor:pointer;text-decoration:none;text-align:center}main:hover{background-color:var(--hover-color)}</style> <main> <span id="icon" class="material-symbols"></span> <span id="text"></span> </main>';class H extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML=R}static get observedAttributes(){return["data-text","data-icon"]}attributeChangedCallback(e,t,r){switch(e){case"data-icon":this._shadow.getElementById("icon").innerText=r;break;case"data-text":this._shadow.getElementById("text").innerText=r}}}window.customElements.define("app-chips",H);var D=new URL(__webpack_require__(156),__webpack_require__.b);const j='<link href="'+t()(D)+'" rel="stylesheet"/> <style>main{display:flex;flex-direction:column;gap:.5em;padding:.5em}#list{display:flex;flex-direction:row;flex-wrap:wrap;gap:.5em;max-height:8em;overflow-y:auto}#list>*{cursor:pointer}#title{font-weight:700}</style> <main> <section id="title">References</section> <section id="list"></section> </main>';class U extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML=j,this._resourceType=null,this._resourceId=null}connectedCallback(){this._shadow.querySelector("main").addEventListener("click",(({target:e})=>{const t=e.closest("app-chips");t&&(location.hash=`#${t.dataset.resource}?${this._resourceType.type.toLowerCase()}=${this._resourceId}`)}))}clear(){const e=this._shadow.getElementById("list");for(;e.firstChild;)e.removeChild(e.lastChild)}load(e,t){this._resourceType=e,this._resourceId=t,this.clear();const r=this._shadow.getElementById("list"),a=v.t.references(e);return!!a.length&&(a.forEach((e=>{let t=document.createElement("app-chips");t.setAttribute("data-icon",v.t.ResourceIcon(e)),t.setAttribute("data-text",e),t.setAttribute("data-resource",e),r.appendChild(t)})),!0)}}customElements.define("fhir-references",U);var O=__webpack_require__(332);class $ extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML=T,this._resourceType=null,this._resourceId=null,this._resource={}}connectedCallback(){this._shadow.getElementById("help").addEventListener("click",(()=>{window.open(`${v.t.helpUrl(this._resourceType.type)}#resource`,"FhirBrowserHelp")})),this._shadow.getElementById("download").addEventListener("click",(()=>{let e,t,r=this.getCurrentContent();switch(r.type){case"ttl":e="data:text/plain;charset=utf-8",t="txt";break;case"xml":e="data:text/xml;charset=utf-8",t="xml";break;default:e="data:text/json;charset=utf-8",t="json"}const a=new File([r.value],this._resourceId,{type:e}),i=URL.createObjectURL(a),o=document.createElement("a");o.href=i,o.download=`${this._resourceType.type}#${a.name}.${t}`,this._shadow.appendChild(o),o.click(),this._shadow.removeChild(o),window.URL.revokeObjectURL(i)})),this._shadow.getElementById("copy").addEventListener("click",(()=>{let e=this.getCurrentContent().value;navigator.clipboard.writeText(e).then((function(){O.h.show("Copying to clipboard was successful")}),(function(e){O.h.error("Could not copy text")}))})),this._shadow.getElementById("share").addEventListener("click",(()=>{let e=this.getCurrentContent().value;const t=`${this._resourceType.type}.${this._resourceId}.txt`,r=new File([e],t,{type:"text/plain"});navigator.share({title:t,files:[r]})})),this._shadow.querySelector("tab-bar").addEventListener("click",(({detail:e})=>{const t=e.tab.id,r=this._shadow.getElementById("xmlView"),a=this._shadow.getElementById("ttlView");this._shadow.getElementById("jsonView").hidden="tabJson"!==t,r.hidden="tabXml"!==t,a.hidden="tabTtl"!==t,"tabXml"!=t||this._resource.xml?"tabTtl"!=t||this._resource.ttl||v.t.readTtl(this._resourceType.type,this._resourceId).then((e=>{this._resource.ttl=e,a.source=e})).catch((e=>{this._resource.xml=null})):v.t.readXml(this._resourceType.type,this._resourceId).then((e=>{const t=(new DOMParser).parseFromString(e,"application/xml");this._resource.xml=e,r.source=t})).catch((e=>{this._resource.xml=null}))}))}getCurrentContent(){let e={};switch(this._shadow.querySelector("app-tab[selected]").id){case"tabXml":e.value=this._resource.xml,e.type="xml";break;case"tabTtl":e.value=this._resource.ttl,e.type="ttl";break;default:e.value=JSON.stringify(this._resource.json),e.type="json"}return e}load({resourceType:e,resourceId:t}){if(e===this._resourceType&&t===this._resourceId)return;const r=this._shadow.querySelector("fhir-references").load(e,t);this._shadow.getElementById("refPanel").style.display=r?"flex":"none";const a=this._shadow.getElementById("header"),i=this._shadow.querySelector("tab-bar"),o=this._shadow.getElementById("jsonView"),s=this._shadow.getElementById("xmlView"),n=this._shadow.getElementById("ttlView"),l=this._shadow.getElementById("share"),d=this._shadow.getElementById("copy"),c=this._shadow.getElementById("download"),h=v.t.formatEnable("ttl");this._shadow.getElementById("tabTtl").hidden=!h,n.hidden=!h;const u=v.t.formatEnable("xml");this._shadow.getElementById("tabXml").hidden=!u,s.hidden=!u,this._shadow.getElementById("title").innerText=e.type,a.classList.remove("error"),this._shadow.getElementById("error").hidden=!0,i.hidden=!1,i.select("tabJson"),this._resource={},o.clear(),s.clear(),n.clear(),v.t.read(e.type,t).then((r=>{this._resourceType=e,this._resourceId=t,this._resource.json=r,o.source=r,l.hidden=!1,d.hidden=!1,c.hidden=!1})).catch((e=>{a.classList.add("error");const t=this._shadow.getElementById("error");t.hidden=!1,t.innerText=e,i.hidden=!0,o.hidden=!0,s.hidden=!0,this._resource.json=null,l.hidden=!0,d.hidden=!0,c.hidden=!0}))}}customElements.define("fhir-resource",$);var z=new URL(__webpack_require__(156),__webpack_require__.b);const N='<link rel="stylesheet" href="'+t()(z)+'"> <style>main{display:flex;flex-direction:column;height:100%}#content{overflow:auto;flex:1 1 auto;height:0}#content>*{cursor:pointer}</style> <main> <section id="content"></section> </main>';class K{static{this.KEY="conf"}static async getAll(){let e=localStorage.getItem(this.KEY);return null===e?await fetch("./default.conf",{cache:"reload"}).then((e=>e.json())).then((e=>(localStorage.setItem(this.KEY,JSON.stringify(e)),e))):JSON.parse(e)}static async get(e){return await this.getAll().then((t=>t[e]))}}class F extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML=N}connectedCallback(){const e=this._shadow.getElementById("content");e.addEventListener("click",(({target:t})=>{const r=t.closest("list-row");r&&(e.querySelector("[selected]")?.removeAttribute("selected"),r.setAttribute("selected","true"),this.serverChanged(r.dataset.id))})),K.getAll().then((e=>{this._conf=e;const t=v.t.server?.serverCode,r=this._shadow.getElementById("content");for(const a of Object.keys(e).sort(((e,t)=>e.localeCompare(t)))){const e=document.createElement("list-row");e.setAttribute("data-id",a),a===t&&e.setAttribute("selected","true");const i=document.createElement("list-item");i.setAttribute("data-primary",a),i.setAttribute("data-secondary",this._conf[a].url),e.appendChild(i),r.appendChild(e)}}))}serverChanged(e){const t=this._conf[e];this.dispatchEvent(new CustomEvent("serverchanged",{bubbles:!1,cancelable:!1,detail:{serverCode:e,server:t}}))}}customElements.define("fhir-server-list",F);var W=new URL(__webpack_require__(156),__webpack_require__.b);const V='<link rel="stylesheet" href="'+t()(W)+'"> <style>#wrapper{display:flex;flex-direction:column;font-family:Roboto,Arial,monospace;height:100%}main{overflow:auto;padding:1em;flex:1 1 auto;height:0}footer{padding:9px 16px;text-align:center;overflow:hidden}footer input[type=button]{background:0 0;border:1px solid var(--primary-color);border-radius:4px;color:var(--primary-color);cursor:pointer;font:inherit;padding:5px 16px;text-transform:uppercase}footer input[type=button]:hover{background-color:var(--hover-color)}</style> <div id="wrapper"> <main> <text-field id="key" placeholder="Code" required></text-field> <text-field id="url" placeholder="Url"></text-field> <server-auth id="authMethod" placeholder="Authorization" value="No Auth"> </server-auth> <section id="apiSection" hidden> <text-field id=" apiKey" placeholder="Key"></text-field> <text-field id="apiValue" placeholder="Value"></text-field> </section> <section id="basicSection" hidden> <text-field id="basicUsername" placeholder="Username"></text-field> <text-field id="basicPassword" placeholder="Password"></text-field> </section> <section id="oauthSection" hidden> <text-field id="oauthTokenurl" placeholder="Access Token URL"></text-field> <text-field id="oauthClientid" placeholder="Client ID"></text-field> <text-field id="oauthClientsecret" placeholder="Client Secret"></text-field> <text-field id="oauthGranttype" placeholder="Grant Type" value="password" readonly="readonly"></text-field> <text-field id="oauthUsername" placeholder="Username"></text-field> <text-field id="oauthPassword" placeholder="Password"></text-field> </section> </main> <footer> <input type="button" id="cancel" value="Cancel"> <input type="button" id="apply" value="Apply"> </footer> </div>';var J=new URL(__webpack_require__(156),__webpack_require__.b);const X='<link href="'+t()(J)+'" rel="stylesheet"/> <style>main{background-color:var(--hover-color,#d3d3d3);border-bottom:1px solid rgba(0,0,0,42%);display:flex;font-size:1em;position:relative;margin-bottom:1em}main:focus-within{border-bottom-color:var(--primary-color,#000)}input{background:0 0;border:0 none;border-bottom:1px solid transparent;caret-color:var(--primary-color,black);color:var(--text-color-normal,#000);flex:auto;font:inherit;padding:15px}input:focus{outline:0;padding:23px 15px 7px 15px;border-color:var(--primary-color)}input::placeholder{font-size:1em;color:var(--text-color-disabled,#000)}input::selection{color:#fff;background:var(--primary-color)}input:focus::placeholder{visibility:hidden}input:not(:placeholder-shown){padding:23px 15px 7px 15px}label{color:var(--text-color-disabled,#000);font-size:12px;left:15px;pointer-events:none;position:absolute;top:6px;visibility:hidden}input:focus+label,input:not(:placeholder-shown)+label{visibility:visible}input:focus+label{color:var(--primary-color,#000)}</style> <main> <input type="text" placeholder="" spellcheck="false"> <label></label> </main>';class Y extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML=X,this._label=""}static get observedAttributes(){return["placeholder","readonly","required","value"]}attributeChangedCallback(e,t,r){const a=this._shadow.querySelector('input[type="text"]');switch(e){case"placeholder":this._label=r;break;case"readonly":null==r?a.removeAttribute("readonly"):a.setAttribute("readonly","");break;case"required":null==r?a.removeAttribute("required"):a.setAttribute("required","");break;case"value":a.setAttribute("value",r)}const i=a.hasAttribute("required"),o=this._label+(i?" *":"");a.setAttribute("placeholder",o),this._shadow.querySelector("label").innerText=o}}window.customElements.define("text-field",Y);class Z extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML=X}static get observedAttributes(){return["placeholder","value"]}attributeChangedCallback(e,t,r){"placeholder"===e?(this._shadow.querySelector('input[type="text"]').setAttribute("placeholder",r),this._shadow.querySelector("label").innerText=r):"value"===e&&(this._shadow.querySelector('input[type="text"]').value=r)}connectedCallback(){this._text=this._shadow.querySelector('input[type="text"]'),this._text.addEventListener("change",(()=>{this.dispatchEvent(new CustomEvent("change",{bubbles:!1,cancelable:!1,detail:{value:this._text.value}}))}));const e=document.createElement("datalist");e.setAttribute("id","values"),["No Auth","API Key","Basic","OAuth 2"].forEach((t=>{let r=document.createElement("option");r.value=t,e.appendChild(r)})),this._shadow.appendChild(e),this._text.setAttribute("list","values")}}customElements.define("server-auth",Z);class G extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML=V}connectedCallback(){const e=this._shadow.querySelector("main");function t(e){const t=this._shadow.getElementById("authMethod").value;let r={url:this._shadow.getElementById("url").value,auth:{method:t,setup:{}}};switch(t){case"API Key":r.auth.setup.key=this._shadow.getElementById("apiKey").value,r.auth.setup.value=this._shadow.getElementById("apiValue").value;break;case"Basic":r.auth.setup.username=this._shadow.getElementById("basicUsername").value,r.auth.setup.password=this._shadow.getElementById("basicPassword").value;break;case"OAuth 2":r.auth.setup.access_token_url=this._shadow.getElementById("oauthTokenurl").value,r.auth.setup.client_id=this._shadow.getElementById("oauthClientid").value,r.auth.setup.client_secret=this._shadow.getElementById("oauthClientsecret").value,r.auth.setup.grant_type=this._shadow.getElementById("oauthGranttype").value,r.auth.setup.username=this._shadow.getElementById("oauthUsername").value,r.auth.setup.password=this._shadow.getElementById("oauthPassword").value}this.dispatchEvent(new CustomEvent("apply",{bubbles:!1,cancelable:!1,detail:{key:this._shadow.getElementById("key").value,server:r}})),e.preventDefault(),e.stopPropagation()}this._shadow.getElementById("apply").addEventListener("click",(e=>{t.call(this,e)})),e.addEventListener("keydown",(e=>{"Enter"!==e.code&&"NumpadEnter"!==e.code||t.call(this,e)})),this._shadow.getElementById("authMethod").addEventListener("change",(({detail:e})=>{this._shadow.getElementById("apiSection").hidden="API Key"!==e.value,this._shadow.getElementById("basicSection").hidden="Basic"!==e.value,this._shadow.getElementById("oauthSection").hidden="OAuth 2"!==e.value}))}set metadata(e){const t=this._shadow.querySelector("main");for(t.scrollTop=0;t.firstChild;)t.removeChild(t.lastChild);e.searchParam&&e.searchParam.sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0)).forEach((e=>{const r=document.createElement("fhir-search-item");r.init(e)&&t.appendChild(r)}))}}customElements.define("fhir-server-form",G),"serviceWorker"in navigator&&navigator.serviceWorker.register("./service-worker.js");class Q extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML=a,window.addEventListener("hashchange",this.locationHandler)}showResource(e,t){this._shadow.getElementById("bdy").style.visibility="visible",window.matchMedia("(max-width: 480px)").matches&&this._shadow.getElementById("leftPanel").classList.add("hidden"),this._shadow.getElementById("metadata").select(e.type),this._shadow.getElementById("bundle").hidden=!0,this._shadow.getElementById("resource").load({resourceType:e,resourceId:t})}showBundle(e,t){this._shadow.getElementById("bdy").style.visibility="visible",window.matchMedia("(max-width: 480px)").matches&&this._shadow.getElementById("leftPanel").classList.add("hidden");const r=this._shadow.getElementById("bundle");r.hidden=!1,this._shadow.getElementById("metadata").select(e.type),r.load(e,t)}locationHandler=async()=>{let e=window.location.hash.replace("#","").trim();if(e.length){let t="",r="",a=[];if(e.indexOf("?")>0)r=e.split("?")[0],a=e.slice(e.indexOf("?")+1).split("&").map((e=>{const[t,r]=e.split("=");return{name:t,value:decodeURIComponent(r)}}));else{const a=e.split("/");r=a[0],t=a[1]||""}const i=v.t.server.capabilities.rest[0].resource.filter((e=>e.type===r))[0];if(!i)return void O.h.show(`Resource "${i}" not found!`);t?this.showResource(i,t):this.showBundle(i,a)}};connectedCallback(){O.h.container=this._shadow,this._shadow.getElementById("navigation").addEventListener("click",(()=>{this._shadow.getElementById("leftPanel").classList.toggle("hidden")})),this._shadow.getElementById("serverSelector").addEventListener("serverchanged",(({detail:e})=>{location.hash="",this.connect(e.serverCode,e.server)})),this._shadow.getElementById("aboutDialogToggle").addEventListener("click",(()=>{this._shadow.getElementById("aboutDialog").hidden=!1})),this._shadow.getElementById("serverDialogToggle").addEventListener("click",(()=>{this._shadow.getElementById("serverDialog").hidden=!1})),this._shadow.getElementById("serverSelector").addEventListener("serverNew",(()=>{this._shadow.getElementById("serverDialog").hidden=!0,this._shadow.getElementById("serverNewDialog").hidden=!1}));const e=i.y.get("server");e?K.get(e).then((t=>{this.connect(e,t)})):this._shadow.getElementById("serverDialog").hidden=!1}connect(e,t){const r=this._shadow.getElementById("waiting");r.style.visibility="visible",v.t.connect(e,t).then((()=>{O.h.show(`Connected to "${e}" server.`),i.y.set("server",e),this._shadow.getElementById("serverDialog").hidden=!0,this._shadow.getElementById("bdy").style.visibility="hidden",this._shadow.getElementById("metadata").server=v.t.server,this._shadow.getElementById("leftPanel").classList.remove("hidden"),this._shadow.getElementById("navigation").hidden=!1,this.locationHandler()})).catch((t=>{O.h.show(`An error occurred while connecting to the server "${e}"`,void 0,void 0,"error")})).finally((()=>{r.style.visibility="hidden"}))}}customElements.define("fhir-browser",Q)})()})();